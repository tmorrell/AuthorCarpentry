<!DOCTYPE html>
<html>
<head>
    <title>Caltech Library's Digital Library Development Sandbox</title>
    <link rel="stylesheet" href="css/site.css">
</head>
<body>
<header>
<a href="http://library.caltech.edu"><img src="assets/liblogo.gif" alt="Caltech Library logo"></a>
</header>
<nav>
<ul>
<li><a href="./">Author Carpentry</a></li>
<li><a href="CODATA-RDA">CODATA-RDA Lessons</a></li>
<li><a href="contributing.html">Contribute</a></li>
<li><a href="How-to-build-this-website.html">How to build this website</a></li>
</ul>

</nav>

<section>
<h1>How to build this website</h1>

<p>These are instructions for generate <a href="https://caltechlibrary.github.io/AuthorCarpentry">caltechlibrary.github.io/AuthorCarpentry</a> website.
This includes content in the <a href="CODATA-RDA/">CODATA-RDA</a> folder.</p>

<h2>One time setup</h2>

<h3>Prerequisites</h3>

<p>You need a (free) <a href="http://github.com">GitHub</a> account and software.  For Windows, download <a href="https://git-for-windows.github.io">Git for Windows</a>. Mac user can download <a href="https://desktop.github.com">GitHub Desktop</a> and select &ldquo;Install Command Line Tools&rdquo; under Preferences/Advanced or using a repository like macports.</p>

<p>This website is built using several command line tools developed at Caltech. They are</p>

<ul>
<li><a href="https://caltechlibrary.github.io/mkpage">mkpage</a> - renders the website from Markdown files using template page.tmpl

<ul>
<li><a href="https://caltechlibrary.github.io/mkpage/install.html">installation instructions</a></li>
</ul></li>
</ul>

<p>Installation instructions are available for Mac OS X, Windows 10, Ubuntu/Linux and Raspbian/Linux operating systems.</p>

<h3>Fork the repository</h3>

<p>Go to the repository <a href="https://github.com/caltechlibrary/AuthorCarpentry">GitHub page</a> and click to fork button in the upper right corner.  This will create a copy of the repository in your personal account.  You can now feel free to make any changes and they won&rsquo;t impact the main copy.</p>

<h2>Working on the repository</h2>

<ul>
<li>Start Bash (On Windows go to Start, Git, Git Bash.  On Mac or Linux go to the Terminal application (installed with OS))</li>
<li>Clone this repository
<code>shell
git clone https://github.com/*your_github_username*/AuthorCarpentry
</code></li>
<li>Change to the repository directory
<code>shell
cd AuthorCarpentry
</code></li>
<li>and you&rsquo;re ready to work - start in next section</li>
</ul>

<h2>On going work</h2>

<p>Once you have your repositories cloned on going authoring is a little easier.</p>

<ul>
<li>edit markdown (.md) files in a text editor</li>
<li>run  <code>./mk-website.bash</code>.  This will generate .html files
You can check the .html files by doing a &ldquo;file open&rdquo; from your web browser on the individual HTML files</li>
<li>run <code>./publish.bash</code>.  You might have to enter your github password.
This copies updates the contents of the <em>gh-pages</em> branch based on the current <em>master</em> branch.</li>
<li>You can put .md files into directories and <code>mk-website.bash</code> will find them.  However, for the moment you need to copy <code>css/</code> and <code>assets/</code> into the directory for the site to render properly (we&rsquo;ll hopefully make this automatic in the future)</li>
</ul>

<p>View your new web site at https://<em>your_github_username</em>.github.io/AuthorCarpentry/</p>

<h2>Don&rsquo;t have an internet connection or want to view your changes privately?</h2>

<p>You can use Robert&rsquo;s simple web server ws.  Follow the installation instructions below.</p>

<ul>
<li><a href="https://caltechlibrary.github.io/ws">ws</a> - (optional) is a static web server you can use to view your site while you&rsquo;re writing it

<ul>
<li><a href="https://caltechlibrary.github.io/ws/install.html">installation instructions</a></li>
</ul></li>
</ul>

<h2>Sharing your changes with the world</h2>

<p>If you want to include your changes in the main AuthorCarpentry repository from <a href="https://github.com/caltechlibrary/AuthorCarpentry">https://github.com/caltechlibrary/AuthorCarpentry</a>, you can submit a pull request.  Go to your personal github page <a href="https://github.com/*your_github_username*/AuthorCarpentry">https://github.com/*your_github_username*/AuthorCarpentry</a> and click the &ldquo;New Pull Request&rdquo; button.  You&rsquo;re requesting the changes to be put into in the base branch (the place you want the changes applied - in this case caltechlibrary) from the compare head branch (where the changes are - your personal repository).  You&rsquo;ll see all the changed files in the boxes below.  Write a title and description of the changes and click &ldquo;Submit Pull Request&rdquo;.  This request will be recorded and a library staff member can authorize the changes.</p>

<hr />

<h2>Summary workflow steps</h2>

<ol>
<li>Create, write and edit your content in Markdown files</li>
<li>For each level of the website you can customize the navigation links in <em>nav.md</em> as need

<ul>
<li>e.g. add additional links to pages or lessons</li>
</ul></li>
<li>In the root of your repository directory run <code>./mk-website.bash</code> to re-generate all the HTML content from your markdown</li>
<li>Check the HTML versions and see if they are what you like

<ul>
<li>e.g. ws</li>
</ul></li>
<li>repeat from 2 as needed</li>
<li>Commit your changes master</li>
<li>Push your changes to master</li>
<li>When you&rsquo;re ready to publish run the publish script

<ul>
<li>./publish.bash</li>
</ul></li>
</ol>

<h2>How it works</h2>

<p>The website is being generated using a tool call <a href="https://caltechlibrary.github.io/mkpage">mkpage</a>. It renders plain text, Markdown and JSON using a simple template engine developed at Google.  Typical you need very few templates to build a website (this site needed only one). Layout is controlled from CSS as well as the markup in your template. <em>mkpage</em> is very friendly to Bash scripts and <code>./mk-website.bash</code> is a good example of using a <em>mkpage</em> and common Unix command in a simple Bash script to render a multi-directory website.</p>

<p>When you commit and push your changes to Github&rsquo;s gh-pages branch then your website hosted at Github updates. This lets you iterate easily working on the website without disruption to the public. When everything checks out the way you want, push your changes to the <em>master</em> branch, pull <em>master</em> into the <em>gh-pages</em> branch and push those up to Github&rsquo;s <em>gh-pages</em> branch. There is an easy to use script call <code>./publish.bash</code> so you don&rsquo;t have to remember those details.</p>

</section>

<footer>
<span>&copy; 2016 <a href="http://library.caltech.edu/CLS_Copyright.htm">Caltech Library</a></span>
<address>1200 E California Blvd, Mail Code 1-32, Pasadena, CA 91125-3200</address>
<span><a href="mailto:library@caltech.edu">Email Us</a></span> 
<span>Phone: <a href="tel:+1-626-395-3405">(626)395-3405</a></span>
</footer>
</body>
</html>
